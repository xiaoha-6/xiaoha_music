"use strict";(self["webpackChunkmusic_player_vue"]=self["webpackChunkmusic_player_vue"]||[]).push([[418],{1418:function(a,e,t){t.r(e),t.d(e,{default:function(){return I}});t(4114),t(8111),t(1701);var s=t(6768),i=t(144),n=t(4232),c=t(1387),l=t(9154),r=t(1389),o=t(7966),d=t(7825),p=t(4151),u=t(5259);const m={class:"discover-container"},v={class:"banner-section"},k={class:"playlist-section"},g={class:"section-header"},h={class:"playlist-grid"},y=["src","alt"],b={class:"playlist-name"},f={class:"recommended-songs-section"},L={class:"table-container"},_={class:"songs-list"},w=["onClick"],C={class:"song-index"},R={class:"song-cover-wrapper"},x=["src","alt"],A={class:"play-icon"},F={class:"song-info"},j={class:"song-name"},M={class:"artist"},E={class:"song-duration"};var X={__name:"DiscoveringMusic",setup(a){const e=(0,c.rd)(),t=(0,i.KR)([{id:"2619366284",cover:"https://pic1.imgdb.cn/item/67ba76f3d0e0a243d4025a27.png",name:"私人雷达 | 为你推荐的每日好歌"},{id:"3778678",cover:"https://pic1.imgdb.cn/item/67ba778cd0e0a243d4025a3f.png",name:"热歌榜 | 最新流行音乐"},{id:"3779629",cover:"https://pic1.imgdb.cn/item/67ba77efd0e0a243d4025a8c.png",name:"新歌榜 | 新歌一网打尽"},{id:"5059642708",cover:"https://pic1.imgdb.cn/item/67ba80ced0e0a243d4025afc.png",name:"怀旧经典 | 永恒的音乐记忆"},{id:"2809513713",cover:"https://pic1.imgdb.cn/item/67ba80f2d0e0a243d4025b00.png",name:"欧美精选 | 精选欧美热门歌曲"}]),X=(0,i.KR)([]),$=async()=>{try{const a=await fetch("https://api.qijieya.cn/meting/?type=playlist&id=3778678"),e=await a.json();if(e&&Array.isArray(e)){const a=e.slice(0,12).map((a=>({id:a.id,cover:a.pic,name:a.title,artist:a.author,duration:S(a.time||0),url:a.url,lrc:a.lrc})));X.value=a}}catch(a){console.error("获取推荐歌曲失败:",a)}},S=a=>{const e=Math.floor(a/60),t=Math.floor(a%60);return`${e}:${t.toString().padStart(2,"0")}`},I=a=>{e.push({name:"PlaylistDetail",params:{id:a.id}})},K=a=>{const e="discover_player";fetch(`https://api.qijieya.cn/meting/?type=song&id=${a.id}`).then((a=>a.json())).then((t=>{t&&t.pic?P(a,e,t.pic):P(a,e,a.cover)})).catch((t=>{console.error("获取歌曲信息失败:",t),P(a,e,a.cover)}))},P=(a,t,s)=>{fetch(`https://${GetParentResourceName()}/playMusic`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:a.url||`https://api.qijieya.cn/meting/?type=url&id=${a.id}`,name:a.name,artist:a.artist,album:"",avatar:s,djTableId:t,volume:100,duration:T(a.duration)})}).then((t=>{t.ok?e.push(`/song/${a.id}`):console.error("Failed to play music:",t.statusText)})).catch((a=>{console.error("Error playing music:",a)}))},T=a=>{const[e,t]=a.split(":").map(Number);return 60*e+t};return(0,s.sV)((()=>{$()})),(a,e)=>((0,s.uX)(),(0,s.CE)("div",m,[(0,s.Lk)("div",v,[(0,s.bF)((0,i.R1)(l.A),{autoplay:"","show-arrow":""},{default:(0,s.k6)((()=>e[0]||(e[0]=[(0,s.Lk)("img",{class:"carousel-img",src:"https://pic1.imgdb.cn/item/67ba76f3d0e0a243d4025a27.png"},null,-1),(0,s.Lk)("img",{class:"carousel-img",src:"https://pic1.imgdb.cn/item/67ba778cd0e0a243d4025a3f.png"},null,-1),(0,s.Lk)("img",{class:"carousel-img",src:"https://pic1.imgdb.cn/item/67ba77efd0e0a243d4025a8c.png"},null,-1)]))),_:1})]),(0,s.Lk)("div",k,[(0,s.Lk)("div",g,[e[2]||(e[2]=(0,s.Lk)("h2",null,"推荐歌单",-1)),(0,s.bF)((0,i.R1)(r.Ay),{text:"",type:"primary"},{icon:(0,s.k6)((()=>[(0,s.bF)((0,i.R1)(o._),null,{default:(0,s.k6)((()=>[(0,s.bF)((0,i.R1)(p.A))])),_:1})])),default:(0,s.k6)((()=>[e[1]||(e[1]=(0,s.eW)(" 更多 "))])),_:1})]),(0,s.bF)((0,i.R1)(d.A),{"x-scrollable":""},{default:(0,s.k6)((()=>[(0,s.Lk)("div",h,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(t.value,(a=>((0,s.uX)(),(0,s.Wv)((0,i.R1)(r.Ay),{key:a.id,class:"playlist-card",text:"",onClick:e=>I(a)},{default:(0,s.k6)((()=>[(0,s.Lk)("img",{src:a.cover,class:"playlist-cover",alt:a.name},null,8,y),(0,s.Lk)("div",b,(0,n.v_)(a.name),1)])),_:2},1032,["onClick"])))),128))])])),_:1})]),(0,s.Lk)("div",f,[e[3]||(e[3]=(0,s.Lk)("div",{class:"section-header"},[(0,s.Lk)("h2",null,"每日推荐")],-1)),(0,s.Lk)("div",L,[(0,s.bF)((0,i.R1)(d.A),{style:{"max-height":"100%"}},{default:(0,s.k6)((()=>[(0,s.Lk)("div",_,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(X.value,((a,e)=>((0,s.uX)(),(0,s.CE)("div",{key:a.id+e,class:(0,n.C4)(["song-item",{"is-even":e%2===0}]),onClick:e=>K(a)},[(0,s.Lk)("div",C,(0,n.v_)(e+1),1),(0,s.Lk)("div",R,[(0,s.Lk)("img",{src:a.cover,class:"song-cover",alt:a.name},null,8,x),(0,s.Lk)("div",A,[(0,s.bF)((0,i.R1)(o._),{size:"16"},{default:(0,s.k6)((()=>[(0,s.bF)((0,i.R1)(u.A))])),_:1})])]),(0,s.Lk)("div",F,[(0,s.Lk)("span",j,(0,n.v_)(a.name),1),(0,s.Lk)("span",M,(0,n.v_)(a.artist),1)]),(0,s.Lk)("div",E,(0,n.v_)(a.duration),1)],10,w)))),128))])])),_:1})])])]))}},$=t(1241);const S=(0,$.A)(X,[["__scopeId","data-v-16437309"]]);var I=S},5259:function(a,e,t){var s=t(6768);const i={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"};e.A=(0,s.pM)({name:"PlayCircleOutline",render:function(a,e){return(0,s.uX)(),(0,s.CE)("svg",i,e[0]||(e[0]=[(0,s.Lk)("path",{d:"M448 256c0-106-86-192-192-192S64 150 64 256s86 192 192 192s192-86 192-192z",fill:"none",stroke:"currentColor","stroke-miterlimit":"10","stroke-width":"32"},null,-1),(0,s.Lk)("path",{d:"M216.32 334.44l114.45-69.14a10.89 10.89 0 0 0 0-18.6l-114.45-69.14a10.78 10.78 0 0 0-16.32 9.31v138.26a10.78 10.78 0 0 0 16.32 9.31z",fill:"currentColor"},null,-1)]))}})}}]);
//# sourceMappingURL=418.51133af7.js.map
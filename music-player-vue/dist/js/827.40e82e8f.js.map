{"version":3,"file":"js/827.40e82e8f.js","mappings":"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","sources":["webpack://music-player-vue/./node_modules/@vicons/ionicons5/es/PlayCircleOutline.js","webpack://music-player-vue/./node_modules/@vicons/ionicons5/es/ArrowBack.js","webpack://music-player-vue/./src/views/PlaylistDetail.vue","webpack://music-player-vue/./src/views/PlaylistDetail.vue?5e27"],"sourcesContent":["import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, defineComponent } from 'vue'\nconst _hoisted_1 = {\n  xmlns: 'http://www.w3.org/2000/svg',\n  'xmlns:xlink': 'http://www.w3.org/1999/xlink',\n  viewBox: '0 0 512 512'\n}\nexport default defineComponent({\n  name: 'PlayCircleOutline',\n  render: function render(_ctx, _cache) {\n    return (\n      _openBlock(),\n      _createElementBlock(\n        'svg',\n        _hoisted_1,\n        _cache[0] ||\n          (_cache[0] = [\n            _createElementVNode(\n              'path',\n              {\n                d: 'M448 256c0-106-86-192-192-192S64 150 64 256s86 192 192 192s192-86 192-192z',\n                fill: 'none',\n                stroke: 'currentColor',\n                'stroke-miterlimit': '10',\n                'stroke-width': '32'\n              },\n              null,\n              -1 /* HOISTED */\n            ),\n            _createElementVNode(\n              'path',\n              {\n                d: 'M216.32 334.44l114.45-69.14a10.89 10.89 0 0 0 0-18.6l-114.45-69.14a10.78 10.78 0 0 0-16.32 9.31v138.26a10.78 10.78 0 0 0 16.32 9.31z',\n                fill: 'currentColor'\n              },\n              null,\n              -1 /* HOISTED */\n            )\n          ])\n      )\n    )\n  }\n})\n","import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, defineComponent } from 'vue'\nconst _hoisted_1 = {\n  xmlns: 'http://www.w3.org/2000/svg',\n  'xmlns:xlink': 'http://www.w3.org/1999/xlink',\n  viewBox: '0 0 512 512'\n}\nexport default defineComponent({\n  name: 'ArrowBack',\n  render: function render(_ctx, _cache) {\n    return (\n      _openBlock(),\n      _createElementBlock(\n        'svg',\n        _hoisted_1,\n        _cache[0] ||\n          (_cache[0] = [\n            _createElementVNode(\n              'path',\n              {\n                fill: 'none',\n                stroke: 'currentColor',\n                'stroke-linecap': 'round',\n                'stroke-linejoin': 'round',\n                'stroke-width': '48',\n                d: 'M244 400L100 256l144-144'\n              },\n              null,\n              -1 /* HOISTED */\n            ),\n            _createElementVNode(\n              'path',\n              {\n                fill: 'none',\n                stroke: 'currentColor',\n                'stroke-linecap': 'round',\n                'stroke-linejoin': 'round',\n                'stroke-width': '48',\n                d: 'M120 256h292'\n              },\n              null,\n              -1 /* HOISTED */\n            )\n          ])\n      )\n    )\n  }\n})\n","<template>\n    <div class=\"playlist-detail-container\">\n        <!-- 添加返回按钮 -->\n        <div class=\"back-header\">\n            <n-button text @click=\"handleBack\" class=\"back-button\">\n                <template #icon>\n                    <n-icon size=\"18\">\n                        <arrow-back />\n                    </n-icon>\n                </template>\n                返回\n            </n-button>\n        </div>\n\n        <!-- 歌单信息头部 -->\n        <div class=\"playlist-header\">\n            <div class=\"cover-section\">\n                <img :src=\"playlistInfo.cover\" class=\"playlist-cover\" :alt=\"playlistInfo.name\">\n            </div>\n            <div class=\"info-section\">\n                <h1 class=\"playlist-title\">{{ playlistInfo.name }}</h1>\n                <p class=\"playlist-desc\">{{ playlistInfo.description }}</p>\n                <div class=\"action-buttons\">\n                    <n-button type=\"primary\" size=\"small\">\n                        播放全部\n                    </n-button>\n                </div>\n            </div>\n        </div>\n\n        <!-- 歌曲列表 -->\n        <div class=\"songs-container\">\n            <n-scrollbar>\n                <div class=\"songs-list\">\n                    <div \n                        v-for=\"(song, index) in songs\" \n                        :key=\"song.id\"\n                        class=\"song-item\"\n                        :class=\"{ 'is-even': index % 2 === 0 }\"\n                        @click=\"handleSongClick(song)\"\n                    >\n                        <div class=\"song-index\">{{ index + 1 }}</div>\n                        <div class=\"song-cover-wrapper\">\n                            <img :src=\"song.cover\" class=\"song-cover\" :alt=\"song.name\">\n                            <div class=\"play-icon\">\n                                <n-icon size=\"16\">\n                                    <play-circle-outline />\n                                </n-icon>\n                            </div>\n                        </div>\n                        <div class=\"song-info\">\n                            <span class=\"song-name\">{{ song.name }}</span>\n                            <span class=\"artist\">{{ song.artist }}</span>\n                        </div>\n                        <div class=\"song-duration\">{{ song.duration }}</div>\n                    </div>\n                </div>\n            </n-scrollbar>\n        </div>\n    </div>\n</template>\n\n<script setup>\nimport { ref, onMounted } from 'vue'\nimport { useRoute, useRouter } from 'vue-router'\nimport { NButton, NScrollbar, NIcon } from 'naive-ui'\nimport { PlayCircleOutline, ArrowBack } from '@vicons/ionicons5'\n\nconst route = useRoute()\nconst router = useRouter()\n\n// 歌单基本信息\nconst playlistInfo = ref({\n    cover: '',\n    name: '',\n    description: ''\n})\n\n// 歌曲列表\nconst songs = ref([])\n\n// 添加返回函数\nconst handleBack = () => {\n    router.back()\n}\n\n// 模拟获取歌单数据\nconst fetchPlaylistData = async (id) => {\n    try {\n        // 使用新的API获取歌单数据\n        const response = await fetch(`https://api.qijieya.cn/meting/?type=playlist&id=${id}`);\n        const data = await response.json();\n        \n        if (data && Array.isArray(data)) {\n            // 格式化数据\n            const playlistInfo = {\n                cover: data[0]?.pic || 'https://pic1.imgdb.cn/item/67ba76f3d0e0a243d4025a27.png',\n                name: data[0]?.title ? `歌单 | ${data[0].title}` : '歌单',\n                description: `共${data.length}首歌曲`,\n                songs: []\n            };\n            \n            // 转换歌曲数据格式\n            data.forEach(song => {\n                playlistInfo.songs.push({\n                    id: song.id,\n                    cover: song.pic,\n                    name: song.title,\n                    artist: song.author,\n                    duration: formatDuration(song.time || 0),\n                    url: song.url,\n                    lrc: song.lrc\n                });\n            });\n            \n            return playlistInfo;\n        }\n        \n        // 如果API请求失败，返回默认数据\n        return fallbackPlaylistData[id] || null;\n    } catch (error) {\n        console.error('获取歌单数据失败:', error);\n        return fallbackPlaylistData[id] || null;\n    }\n}\n\n// 格式化时长\nconst formatDuration = (seconds) => {\n    const minutes = Math.floor(seconds / 60);\n    const secs = Math.floor(seconds % 60);\n    return `${minutes}:${secs.toString().padStart(2, '0')}`;\n}\n\n// 备用数据\nconst fallbackPlaylistData = {\n        'personal-radar': {\n            cover: 'https://pic1.imgdb.cn/item/67ba76f3d0e0a243d4025a27.png',\n            name: '私人雷达',\n            description: '为你推荐的每日好歌',\n            songs: [\n                {\n                    id: 1,\n                    cover: 'https://pic1.imgdb.cn/item/67ba76f3d0e0a243d4025a27.png',\n                    name: '习惯失恋',\n                    artist: '容祖儿',\n                    duration: '03:56'\n                },\n                {\n                    id: 2,\n                    cover: 'https://pic1.imgdb.cn/item/67ba778cd0e0a243d4025a3f.png',\n                    name: '我看了56次日落',\n                    artist: 'ET',\n                    duration: '02:33'\n                },\n                {\n                    id: 3,\n                    cover: 'https://pic1.imgdb.cn/item/67ba77efd0e0a243d4025a8c.png',\n                    name: '可惜没如果',\n                    artist: '林俊杰',\n                    duration: '04:58'\n                },\n                {\n                    id: 4,\n                    cover: 'https://pic1.imgdb.cn/item/67ba80ced0e0a243d4025afc.png',\n                    name: '幸福慢慢来',\n                    artist: '李荣浩',\n                    duration: '02:40'\n                }\n            ]\n        },\n        // ... 其他歌单数据 ...\n}\n\nconst handleSongClick = (song) => {\n    // 处理歌曲点击，直接播放音乐而不是跳转到详情页\n    const djTableId = 'playlist_player';\n    \n    // 确保有最新的封面\n    fetch(`https://api.qijieya.cn/meting/?type=song&id=${song.id}`)\n      .then(response => response.json())\n      .then(songData => {\n        if (songData && songData.pic) {\n          // 使用获取到的新封面\n          playSongWithCover(song, djTableId, songData.pic);\n        } else {\n          // 使用原有封面\n          playSongWithCover(song, djTableId, song.cover);\n        }\n      })\n      .catch(error => {\n        console.error('获取歌曲信息失败:', error);\n        playSongWithCover(song, djTableId, song.cover);\n      });\n}\n\n// 使用指定封面播放歌曲\nconst playSongWithCover = (song, djTableId, coverUrl) => {\n    // 播放音乐\n    fetch(`https://${GetParentResourceName()}/playMusic`, {\n        method: \"POST\",\n        headers: {\n            \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n            url: song.url || `https://api.qijieya.cn/meting/?type=url&id=${song.id}`,\n            name: song.name,\n            artist: song.artist,\n            album: '',\n            avatar: coverUrl,\n            djTableId: djTableId,\n            volume: 100,\n            duration: durationToSeconds(song.duration)\n        })\n    }).then(response => {\n        if (!response.ok) {\n            console.error('Failed to play music:', response.statusText);\n        } else {\n            // 可以选择跳转到歌曲详情页\n            router.push(`/song/${song.id}`);\n        }\n    }).catch(error => {\n        console.error('Error playing music:', error);\n    });\n}\n\n// 将时间格式转换为秒数\nconst durationToSeconds = (duration) => {\n    const [minutes, seconds] = duration.split(':').map(Number);\n    return minutes * 60 + seconds;\n}\n\nonMounted(async () => {\n    const playlistId = route.params.id\n    const data = await fetchPlaylistData(playlistId)\n    if (data) {\n        playlistInfo.value = {\n            cover: data.cover,\n            name: data.name,\n            description: data.description\n        }\n        songs.value = data.songs\n    }\n})\n</script>\n\n<style scoped>\n.playlist-detail-container {\n    height: 100vh;\n    padding: 12px 20px 80px;\n    display: flex;\n    flex-direction: column;\n    gap: 12px;\n    overflow: hidden;\n    box-sizing: border-box;\n}\n\n/* 添加返回按钮样式 */\n.back-header {\n    margin-bottom: 16px;\n}\n\n.back-button {\n    display: flex;\n    align-items: center;\n    color: #fff;\n    font-size: 14px;\n    transition: color 0.2s;\n}\n\n.back-button:hover {\n    color: var(--primary-color);\n}\n\n/* 调整图标和文字的间距 */\n.back-button :deep(.n-icon) {\n    margin-right: 4px;\n}\n\n.playlist-header {\n    display: flex;\n    gap: 20px;\n    padding-bottom: 20px;\n}\n\n.cover-section {\n    width: 200px;\n    height: 200px;\n    flex-shrink: 0;\n}\n\n.playlist-cover {\n    width: 100%;\n    height: 100%;\n    object-fit: cover;\n    border-radius: 8px;\n}\n\n.info-section {\n    flex: 1;\n    display: flex;\n    flex-direction: column;\n    gap: 12px;\n}\n\n.playlist-title {\n    font-size: 24px;\n    font-weight: bold;\n    margin: 0;\n    color: #fff;\n}\n\n.playlist-desc {\n    font-size: 14px;\n    color: #999;\n    margin: 0;\n}\n\n.songs-container {\n    flex: 1;\n    overflow: hidden;\n    background: rgba(28, 28, 28, 0.8);\n    border-radius: 8px;\n    backdrop-filter: blur(10px);\n}\n\n.songs-list {\n    padding: 8px;\n}\n\n.song-item {\n    display: flex;\n    align-items: center;\n    padding: 8px 12px;\n    border-radius: 4px;\n    cursor: pointer;\n    transition: all 0.2s;\n}\n\n.song-item:hover {\n    background: rgba(255, 255, 255, 0.1);\n}\n\n.song-item.is-even {\n    background: rgba(255, 255, 255, 0.02);\n}\n\n.song-item:hover .play-icon {\n    opacity: 1;\n}\n\n.song-index {\n    width: 30px;\n    color: #999;\n    font-size: 14px;\n    text-align: center;\n}\n\n.song-cover-wrapper {\n    width: 40px;\n    height: 40px;\n    position: relative;\n    margin-right: 12px;\n    border-radius: 4px;\n    overflow: hidden;\n}\n\n.song-cover {\n    width: 100%;\n    height: 100%;\n    object-fit: cover;\n}\n\n.play-icon {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    background: rgba(0, 0, 0, 0.5);\n    opacity: 0;\n    transition: opacity 0.2s;\n    color: #fff;\n}\n\n.song-info {\n    flex: 1;\n    display: flex;\n    flex-direction: column;\n    gap: 4px;\n    min-width: 0;\n}\n\n.song-name {\n    font-size: 14px;\n    color: #fff;\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n}\n\n.artist {\n    font-size: 12px;\n    color: #999;\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n}\n\n.song-duration {\n    width: 80px;\n    text-align: right;\n    color: #999;\n    font-size: 12px;\n}\n\n:deep(.n-scrollbar-rail) {\n    background-color: rgba(255, 255, 255, 0.1) !important;\n}\n\n:deep(.n-scrollbar-content) {\n    padding-right: 8px;\n}\n</style>\n","import script from \"./PlaylistDetail.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./PlaylistDetail.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./PlaylistDetail.vue?vue&type=style&index=0&id=63bae50c&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-63bae50c\"]])\n\nexport default __exports__"],"names":["_hoisted_1","xmlns","viewBox","defineComponent","name","render","_ctx","_cache","_openBlock","_createElementBlock","_createElementVNode","d","fill","stroke","route","useRoute","router","useRouter","playlistInfo","ref","cover","description","songs","handleBack","back","fetchPlaylistData","async","response","fetch","id","data","json","Array","isArray","pic","title","length","forEach","song","push","artist","author","duration","formatDuration","time","url","lrc","fallbackPlaylistData","error","console","seconds","minutes","Math","floor","secs","toString","padStart","handleSongClick","djTableId","then","songData","playSongWithCover","catch","coverUrl","GetParentResourceName","method","headers","body","JSON","stringify","album","avatar","volume","durationToSeconds","ok","statusText","split","map","Number","onMounted","playlistId","params","value","__exports__"],"sourceRoot":""}
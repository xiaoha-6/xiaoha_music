"use strict";(self["webpackChunkmusic_player_vue"]=self["webpackChunkmusic_player_vue"]||[]).push([[827],{5259:function(t,e,a){var n=a(6768);const i={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"};e.A=(0,n.pM)({name:"PlayCircleOutline",render:function(t,e){return(0,n.uX)(),(0,n.CE)("svg",i,e[0]||(e[0]=[(0,n.Lk)("path",{d:"M448 256c0-106-86-192-192-192S64 150 64 256s86 192 192 192s192-86 192-192z",fill:"none",stroke:"currentColor","stroke-miterlimit":"10","stroke-width":"32"},null,-1),(0,n.Lk)("path",{d:"M216.32 334.44l114.45-69.14a10.89 10.89 0 0 0 0-18.6l-114.45-69.14a10.78 10.78 0 0 0-16.32 9.31v138.26a10.78 10.78 0 0 0 16.32 9.31z",fill:"currentColor"},null,-1)]))}})},8827:function(t,e,a){a.r(e),a.d(e,{default:function(){return X}});a(4114),a(8111),a(7588),a(1701);var n=a(6768),i=a(144),s=a(4232),r=a(1387),l=a(1389),o=a(7966),c=a(7825);const d={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"};var p=(0,n.pM)({name:"ArrowBack",render:function(t,e){return(0,n.uX)(),(0,n.CE)("svg",d,e[0]||(e[0]=[(0,n.Lk)("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"48",d:"M244 400L100 256l144-144"},null,-1),(0,n.Lk)("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"48",d:"M120 256h292"},null,-1)]))}}),u=a(5259);const v={class:"playlist-detail-container"},m={class:"back-header"},k={class:"playlist-header"},h={class:"cover-section"},g=["src","alt"],y={class:"info-section"},f={class:"playlist-title"},b={class:"playlist-desc"},w={class:"action-buttons"},L={class:"songs-container"},_={class:"songs-list"},C=["onClick"],x={class:"song-index"},R={class:"song-cover-wrapper"},j=["src","alt"],A={class:"play-icon"},F={class:"song-info"},M={class:"song-name"},$={class:"artist"},E={class:"song-duration"};var z={__name:"PlaylistDetail",setup(t){const e=(0,r.lq)(),a=(0,r.rd)(),d=(0,i.KR)({cover:"",name:"",description:""}),z=(0,i.KR)([]),S=()=>{a.back()},T=async t=>{try{const e=await fetch(`https://api.qijieya.cn/meting/?type=playlist&id=${t}`),a=await e.json();if(a&&Array.isArray(a)){const t={cover:a[0]?.pic||"https://pic1.imgdb.cn/item/67ba76f3d0e0a243d4025a27.png",name:a[0]?.title?`歌单 | ${a[0].title}`:"歌单",description:`共${a.length}首歌曲`,songs:[]};return a.forEach((e=>{t.songs.push({id:e.id,cover:e.pic,name:e.title,artist:e.author,duration:X(e.time||0),url:e.url,lrc:e.lrc})})),t}return q[t]||null}catch(e){return console.error("获取歌单数据失败:",e),q[t]||null}},X=t=>{const e=Math.floor(t/60),a=Math.floor(t%60);return`${e}:${a.toString().padStart(2,"0")}`},q={"personal-radar":{cover:"https://pic1.imgdb.cn/item/67ba76f3d0e0a243d4025a27.png",name:"私人雷达",description:"为你推荐的每日好歌",songs:[{id:1,cover:"https://pic1.imgdb.cn/item/67ba76f3d0e0a243d4025a27.png",name:"习惯失恋",artist:"容祖儿",duration:"03:56"},{id:2,cover:"https://pic1.imgdb.cn/item/67ba778cd0e0a243d4025a3f.png",name:"我看了56次日落",artist:"ET",duration:"02:33"},{id:3,cover:"https://pic1.imgdb.cn/item/67ba77efd0e0a243d4025a8c.png",name:"可惜没如果",artist:"林俊杰",duration:"04:58"},{id:4,cover:"https://pic1.imgdb.cn/item/67ba80ced0e0a243d4025afc.png",name:"幸福慢慢来",artist:"李荣浩",duration:"02:40"}]}},P=t=>{const e="playlist_player";fetch(`https://api.qijieya.cn/meting/?type=song&id=${t.id}`).then((t=>t.json())).then((a=>{a&&a.pic?B(t,e,a.pic):B(t,e,t.cover)})).catch((a=>{console.error("获取歌曲信息失败:",a),B(t,e,t.cover)}))},B=(t,e,n)=>{fetch(`https://${GetParentResourceName()}/playMusic`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:t.url||`https://api.qijieya.cn/meting/?type=url&id=${t.id}`,name:t.name,artist:t.artist,album:"",avatar:n,djTableId:e,volume:100,duration:I(t.duration)})}).then((e=>{e.ok?a.push(`/song/${t.id}`):console.error("Failed to play music:",e.statusText)})).catch((t=>{console.error("Error playing music:",t)}))},I=t=>{const[e,a]=t.split(":").map(Number);return 60*e+a};return(0,n.sV)((async()=>{const t=e.params.id,a=await T(t);a&&(d.value={cover:a.cover,name:a.name,description:a.description},z.value=a.songs)})),(t,e)=>((0,n.uX)(),(0,n.CE)("div",v,[(0,n.Lk)("div",m,[(0,n.bF)((0,i.R1)(l.Ay),{text:"",onClick:S,class:"back-button"},{icon:(0,n.k6)((()=>[(0,n.bF)((0,i.R1)(o._),{size:"18"},{default:(0,n.k6)((()=>[(0,n.bF)((0,i.R1)(p))])),_:1})])),default:(0,n.k6)((()=>[e[0]||(e[0]=(0,n.eW)(" 返回 "))])),_:1})]),(0,n.Lk)("div",k,[(0,n.Lk)("div",h,[(0,n.Lk)("img",{src:d.value.cover,class:"playlist-cover",alt:d.value.name},null,8,g)]),(0,n.Lk)("div",y,[(0,n.Lk)("h1",f,(0,s.v_)(d.value.name),1),(0,n.Lk)("p",b,(0,s.v_)(d.value.description),1),(0,n.Lk)("div",w,[(0,n.bF)((0,i.R1)(l.Ay),{type:"primary",size:"small"},{default:(0,n.k6)((()=>e[1]||(e[1]=[(0,n.eW)(" 播放全部 ")]))),_:1})])])]),(0,n.Lk)("div",L,[(0,n.bF)((0,i.R1)(c.A),null,{default:(0,n.k6)((()=>[(0,n.Lk)("div",_,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(z.value,((t,e)=>((0,n.uX)(),(0,n.CE)("div",{key:t.id,class:(0,s.C4)(["song-item",{"is-even":e%2===0}]),onClick:e=>P(t)},[(0,n.Lk)("div",x,(0,s.v_)(e+1),1),(0,n.Lk)("div",R,[(0,n.Lk)("img",{src:t.cover,class:"song-cover",alt:t.name},null,8,j),(0,n.Lk)("div",A,[(0,n.bF)((0,i.R1)(o._),{size:"16"},{default:(0,n.k6)((()=>[(0,n.bF)((0,i.R1)(u.A))])),_:1})])]),(0,n.Lk)("div",F,[(0,n.Lk)("span",M,(0,s.v_)(t.name),1),(0,n.Lk)("span",$,(0,s.v_)(t.artist),1)]),(0,n.Lk)("div",E,(0,s.v_)(t.duration),1)],10,C)))),128))])])),_:1})])]))}},S=a(1241);const T=(0,S.A)(z,[["__scopeId","data-v-63bae50c"]]);var X=T}}]);
//# sourceMappingURL=827.40e82e8f.js.map